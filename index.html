<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Products2</title>
    <style>
        #btn{
            background-color: rgb(177, 227, 227);
            border: none;
            font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
            font-size: 30px;
        }
        .product{
            font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
        }
        .name{
            font-weight: bolder;
            font-size: 30px;
        }
        .desc{
            font-style: italic;
        }
        
        
    </style>
</head>
<body>
    <div id="result">
        <button id="btn">Read Data</button>
    </div>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script>
        $("#btn").on("click", function(){
            const req = new XMLHttpRequest();
            req.open("GET", "https://rimbadaoui.github.io/products2-JSON/products.json", true); 
            req.onreadystatechange = function() {
                if (this.readyState === 4 && this.status === 200) {
                    const products = JSON.parse(this.responseText);
                    const container = document.getElementById("result");

                    products.forEach(product => {
                        const cats = product.categories.join(", ");
                        container.innerHTML += `
                        <h3>${product.name}</h3>
                        <p>Description: ${product.description}</p>
                        <p>Categories: ${cats}</p>
                        <p>Price: $${product.price}</p>
                        `;
                    });
                }
            };
            req.send();
        


            // $.get("products.json", function(data){
            //     if(typeof data !== "object"){
            //         document.getElementById("result").innerHTML = "Failed to load products.json.";
            //         return;
            //     }
            //     let html = "";
            //     for (let i=0; i<data.length; i++){
            //         const product = data[i];
            //         const cats = Array.isArray(product.categories) ? product.categories.join(", ") : "";

            //         html+= 
            //             "<div class='product'>" +
            //                 "<div class='name'>" + product.name + "</div>" +
            //                 "<div class='desc'>" + product.description + "</div>" +
            //                 "<div class='price'>Price: $" + product.price + "</div>" +
            //                 "<div class='cats'>Categories: " + cats + "</div>" +
            //                 "</div>";
            //     }
            //     document.getElementById("result").innerHTML = html;
            // });
        });
    </script>
</body>
</html>
